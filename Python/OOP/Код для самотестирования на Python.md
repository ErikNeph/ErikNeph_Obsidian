---
date of creation: 2024-06-24T14:33:00
tags:
  - Python
  - Developing
  - Developing/Python
  - IT
  - Test
  - Tests
  - Programming
Read status: true
---
---
# Код для самотестирования


Хотя этот раздел посвящен команде **`import`**, файлы Python часто выполняются в качестве основного сценария:

```bash
% python3 module.py
```

В каждом модуле есть переменная **`__name__`**, где хранится его имя. Код может проверить эту переменную, чтобы определить, в каком модуле она
выполняется. Модуль верхнего уровня в интерпретаторе называется **`__main__`**. Программы, заданные в командной строке или введенные в интерактивном режиме, выполняются в **`__main__`**.

Иногда программа может изменить это поведение в зависимости от того, была ли она импортирована в виде модуля или выполняется в **`__main__`**. Например, модуль может включать код, который выполняется, если модуль выполняется как основная программа, но игнорируется при простом импорте модуля другим модулем.

```python
# Проверить, в каком режиме выполняется модуль
if __name__ == '__main__':
	# Да, выполняется как основной сценарий
    команды
else:
	# Нет, импортируется как модуль команды
	команды
```

Исходные файлы для использования в качестве библиотек могут применять такие проверки для включения необязательного тестового кода или примеров. При разработке модулей можно поместить отладочный код для тестирования функциональности вашей библиотеки внутри команды **`if`** ==и выполнять код Python вашего модуля как основную программу==. Этот код не будет выполняться у пользователей, импортирующих вашу библиотеку. Каталог с кодом Python можно выполнить, если он содержит специальный файл **`__main__.py`**. Допустим, вы создаете такой каталог:

```explorer
myapp/
foo.py bar.py
__main__.py
```

Вы можете применить этот каталог в Python командой **`python3 myapp`**. Выполнение начнется с файла **`__main__.py`**. Этот способ работает, и если вы преобразуете каталог **`myapp`** в ZIP-архив. Команда python3 `myapp.zip` ищет файл **`__main__.py`** на верхнем уровне структуры и выполняет его, если он будет найден.

==**`__name__`** часто используется в сценариях. Проверки вида **`if __name__ == '__main__'`** используются, чтобы проверить, выполняется ли файл как автономная программа.==