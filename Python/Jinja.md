---
title: Jinja
date of creation: 2025-04-08T16:19:00
tags:
  - Templates
  - Python/Templates
  - Frontend
  - Backend
  - Python/Backend
read status: true
completion status: false
aliases:
  - jinja
---
# Jinja
---

**Jinja** - Это механизм шаблонов, написанный на [[Python]], предназначенный для облегчения процесса рендеринга ответов [[API]]. В каждом языке шаблонов есть *переменные*, которые заменяются фактическими значениями, переданными им при отображения шаблона, и есть теги, управляющие логикой шаблона.

Механизм шаблонов **Jinja** использует фигурные скобки **`{}`**, чтобы отличить свои выражения и синтаксис от обычного [[HTML]], текста и любой другой переменной в файле шаблона.

Синтаксис **`{{}}`** называется блоком переменных. Синтаксис **`{% %}`** содержит управляющие структуры, такие как `if/else`, циклы и макросы.

Три общих синтаксических блока, используемых в языке шаблонов Jinja, включают следующее:

- **`{% … %}`** – Этот синтаксис используется для операторов, таких как управляющие структуры.
- **`{{ todo.item }}`** – Этот синтаксис используется для вывода значений переданных ему выражений.
- **`{# This is a great API book! #}`** – Этот синтаксис используется при написании комментариев и не отображается на веб-странице.

Переменные шаблона Jinja могут относиться к любому типу или [[Объекты в Python|объекту Python]], если их можно преобразовать в строки. Тип модели, списка или словаря можно передать шаблону и отобразить его атрибуты, поместив эти атрибуты во второй блок, указанный ранее.


## Фильтры
---

Несмотря на сходство синтаксиса Python и Jinja, такие модификации, как объединение строк, установка первого символа строки в верхний регистр и т. д., не могут быть выполнены с использованием синтаксиса Python в Jinja. Поэтому для выполнения таких модификаций у нас в Jinja есть фильтры.

Фильтр отделяется от переменной вертикальной чертой **`(|)`** и может содержать необязательные аргументы в круглых скобках. Фильтр определяется в этом формате:

```html
{{ variable | filter_name(*args) }}
```

Если нет аргументов, определение становится следующим:

```html
{{ variable | filter_name }}
```


### Фильтр по умолчанию
---

Переменная фильтра по умолчанию используется для замены вывода переданного значения, если оно оказывается **`None`**:

```html
{{ todo.item | default("This is a default todo item") }}
This is a default todo item
```


### Эвакуационный фильтр
---

Этот фильтр используется для отображения необработанного вывода HTML:

```html
{{ "<title>Todo Application</title>" | escape }}
<title>Todo Application</title>
```


### Фильтры преобразования
---

Эти фильтры включают фильтры **`int`** и **`float`**, используемые для преобразования из одного типа данных в другой:

```html
{{ 3.142 | int }}
3
{{ 31 | float }}
31.0
```


### Фильтр объединения
---

Этот фильтр используется для объединения элементов списка в строку, как в Python:

```html
{{ ['Packt', 'produces', 'great', 'books!'] | join(' ') }}
Packt produces great books!
```


### Фильтр длинны
---

Этот фильтр используется для возврата длины переданного объекта. Он выполняет ту же роль, что и **`len()`** в Python:

```html
Todo count: {{ todos | length }}
Todo count: 4
```


>[!info]
>Полный список возможностей фильтров Jinja и дополнительных сведения находится в официальной документации: https://jinja.palletsprojects.com/en/stable/templates/#builtin-filters


## Использование операторов if
---

Использование операторов **`if`** в Jinja аналогично их использованию в Python. **`if`** операторы используются в блоках управления **`{% %}`**. Давайте посмотрим на пример:

```jinja(html)
{% if todo | length < 5 %}
	You don't have much items on your todo list.
{% else %}
	You have a busy day it seems!
{% endif %}
```


## Циклы
---

Мы также можем перебирать переменные в Jinja. Это может быть список или общая функция, например, следующая:

```html
{% for todo in todos %}
	<b>{{ todo.item }}</b>
{% endfor %}
```

Вы можете получить доступ к специальным переменным внутри цикла **`for`**, таким как **`loop.index`**, который дает индекс текущей итерации.


## Макросы
---

Макрос в Jinja — это функция, которая возвращает строку HTML. Основной вариант использования макросов — избежать повторения кода и вместо этого использовать один вызов функции. Например, макрос ввода определен для сокращения непрерывного определения тегов ввода в HTML-форме:

```jinja html
{% macro input(name, value='', type='text', size=20 %}
    <div class="form">
	    <input type="{{ type }}" name="{{ name }}"
	    value="{{ value|escape }}" size="{{ size }}">
    </div>
{% endmacro %}
```

Теперь, чтобы быстро создать ввод в вашей форме, вызывается макрос:

```jinja
{{ input('item') }}
```

Это вернет следующее:

```html
<div class="form">
    <input type="text" name="item" value="" size="20">
</div>
```


## Наследование шаблонов
---

Самая мощная функция Jinja — наследование шаблонов. Эта функция продвигает принцип **«не повторяйся» ([[DRY]])** и удобна в больших веб-приложениях. Наследование шаблона — это ситуация, когда базовый шаблон определен, а дочерние шаблоны могут взаимодействовать, наследовать и заменять определенные разделы базового шаблона.

>[!info]
>Вы можете узнать больше о наследовании шаблонов Jinja на 
>https://jinja.palletsprojects.com/en/stable/templates/#template-inheritance

