---
title: asyncio
date of creation: 2025-04-21T23:04:00
tags:
  - Library
  - Python/Library
  - Concurrency
  - Python/Concurrency
  - Developing/Python
read status: true
completion status: true
aliases:
  - сопрограммы на python
  - корутины на python
  - Сопрограммы на Python
  - Корутины на Python
  - AsyncIO
---
# asyncio
---
Библиотека asyncio исполняет сопрограммы асинхронно, пользуясь моделью [[Конкурентность|конкурентности]], получившей название однопоточный цикл событий.

**asyncio** - Асинхронное выполнение, подходит для [[IO|IO-bound]] (Операции ввода/вывода) задач, ==работает ровно 1 поток.== Так же существуют ещё и [[CPU-bound]] (счетные или же вычислительные задачи).

Истинное достоинство **asyncio** – возможность приостановить выполнение и дать циклу событий возможность выполнить другие задачи, пока длительная операция делает свое дело. Для приостановки выполнения служит ключевое слово `await`, за ним обычно следует обращение к сопрограмме (точнее, к объекту, *допускающему ожидание*, который необязательно является сопрограммой;

**Корутина (сопрограмма)** - это метод, который можно приостановить, если имеется потенциально длительная задача, а затем возобновить, когда она завершится. **Сопрограмму** можно рассматривать как обычную функцию Python, наделенную сверхспособностью: приостанавливаться, встретив операцию, для выполнения которой нужно заметное количество времени.

*Плюсы:*
1. Скорость и экономия времени, вместо x + y + z -> max(x, y, z) то есть прирост в два раза.
2. Управляемость.
3. Меньше потребление ресурсов.
4. Выполнение в одном процессе и потоке.
5. Нет гонок.
6. Код становится отказоустойчивым.

***Минусы:***
1. "умирает/замедляется" из за одного синхронного (блокирующего) вызова!
2. Сложность отладки.
3. Сложно читаемый код.
4. Долго выполняющие задачи блокируют выполнение других задач.

***Важное:***
1. корутина (сопрограмма) работает как генератор.
2. `async` - явный флаг, что данная функция является асинхронной (корутиной).
3. `await` - явный флаг, что в этом месте функция встает на паузу и дает работать другим, пока ждет свои данные.
4. `event loop` - цикл событий, механизм, который отвечает за планирование и запуска корутин. Можно представить как список/очередь, из которого в вечном списке достаются и запускаются корутины.


***Частые ошибки:***
1. не использование `await` внутри корутины.
2. создание корутины, но использование её, как функции.
3. использование внутри корутин синхронного (блокирующего) кода, в том числе IO.

>[!info]
>Библиотека asyncio впервые появилась в версии Python 3.4 как еще один способ справляться с высокими конкурентными нагрузками, не прибегая к нескольким потокам или процессам.

Чтобы лучше узнать как работать в **asyncio**, пройди по ссылки: [[Основы синтаксиса async await и сопрограмм]].
