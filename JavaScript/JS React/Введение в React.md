---
date of creation: 2024-07-14T06:24:00
tags:
  - React
  - JS/React
  - Framework
  - Framework/JS
  - Developing
  - Developing/JS
  - JS
read status: false
aliases:
---
---
# Введение в React


При использовании JavaScript, HTML и CSS для создания динамических вебсайтов наступает момент, когда код, необходимый для обработки интерфейса ваших веб-сайтов и приложений, может стать громоздким и чрезмерно подробным, что замедляет скорость разработки проекта и может стать причиной появления труднонаходимых ошибок.

Именно здесь на помощь приходят среды. Конечно, с 2006 года нам помогает также библиотека jQuery, соответственно она установлена на подавляющем большинстве производственных веб-сайтов. К тому же в наши дни значительно увеличились масштабы и гибкость JavaScript, и программистам можно намного меньше полагаться на такие среды, как jQuery. Кроме того, с течением времени технология постоянно совершенствуется, и теперь есть ряд других отличных вариантов, таких как [[Angular Framework|Angular]] и, как уже говорилось, ==мой фаворит — React==.

jQuery была разработана для упрощения обхода дерева HTML DOM и манипулирования им, а также для обработки событий, CSS-анимации и Ajax, но некоторые программисты, например команда разработчиков Google, посчитали, что она все еще недостаточно мощная, и в 2010 году придумали Angular JS, который в 2016 году превратился в Angular.

Angular в качестве основной архитектурной характеристики использует иерархию компонентов, а не область видимости или контроллеры (например, Angular). Мощная платформа Google AdWords работает на Angular, как и Forbes, Autodesk, Indiegogo, UPS и многие другие, и это действительно чрезвычайно мощная платформа.

А вот Facebook придерживался другого видения и придумал библиотеку React, известную также как React JS, в качестве основы для разработки одностраничных или мобильных приложений, основываясь на расширении [[JSX (JavaScript XML)]]. Библиотека React, разработанная в 2012 году, разделяет веб-страницу на отдельные компоненты, упрощая разработку интерфейса, необходимого для обслуживания всей рекламы Facebook и многого другого. В настоящее время она широко используется такими широко известными платформами, как Dropbox, Cloudflare, Airbnb, Netflix, BBC, PayPal и многими другими.

Очевидно, что при создании и проектировании и Angular, и React руководствовались надежными коммерческими решениями. Они были созданы для работы с веб-страницами с чрезвычайно высоким трафиком, когда считалось, что jQuery просто не обладает той мощью, которая нужна была разработчикам. Поэтому сегодня наряду со знанием основных технологий JavaScript, HTML, CSS, серверного языка, такого как PHP, и базы данных, такой как MySQL, программистам все еще может быть полезно хоть немного знать jQuery и разбираться либо в Angular, либо в React, если не в обеих сразу, а также, возможно, в других средах, у которых также есть последователи.

Однако я решил, что важнее познакомить вас с React, так как она проста в использовании, у нее не слишком сложны кривая обучения и общая реализация, а также потому, что [Google Trends](https://trends.google.com/trends/) показывает, что эта структура пользуется наибольшей популярностью среди всех трех, как показано на **рис. 24.1**. Кстати, пожалуйста, не путайте [[ReactPHP]] с React для JavaScript, поскольку это совершенно отдельный, не связанный с рассматриваемым проект.

>![[Рис. 24.1. Популярность jQuery, Angular и React в настоящее время по данным Google Trends.jpg]]
>**Рис. 24.1.** Популярность jQuery, Angular и React в настоящее время по данным Google Trends


## В чем же суть React?
---

==React позволяет разработчикам создавать большие веб-приложения, которые могут легко обрабатывать и изменять данные без перезагрузки веб-страницы.== Ее основными целями являются скорость, масштабируемость и простота в обработке уровня просмотра одностраничных веб-приложений и мобильных приложений. Она также позволяет создавать повторно используемые компоненты пользовательского интерфейса и управляет виртуальным DOM для повышения производительности. Некоторые люди говорят, что его можно использовать в качестве V в архитектуре [[MVC (Model, View, Controller)]] — модель, представление, контроллер), которая разделяет приложения на три компонента.

Вместо того чтобы придумывать различные способы описания транзакций для интерфейсов, разработчики могут просто описать интерфейсы в терминах конечного состояния так, что когда транзакции происходят в этом состоянии, React обновляет пользовательский интерфейс за вас. ==Конечными результатами являются более быстрая разработка с меньшим количеством ошибок, скорость, надежность и масштабируемость.== Поскольку React — это библиотека, а не среда, изучить ее можно быстро: нужно освоить всего несколько функций. После этого все будет зависеть от ваших навыков работы с JavaScript.

Итак, начнем изучение с того, как получить доступ к файлам React.

>[!info]
>На мой взгляд, jQuery великолепен, но я также считаю React очень простым в использовании. И полагаю, время покажет, прав ли я в своем предположении, что React может в конечном итоге заменить jQuery в качестве доминирующей платформы, особенно для работы с пользовательским интерфейсом, хотя бы потому, что она намного богаче. Но даже если этого не произойдет, изучив React, вы все равно получите в свое распоряжение невероятно мощный новый инструмент, который многие ведущие компании будут искать в вашем резюме. Но не стоит сбрасывать со счетов и Angular. Если бы в этой книге было место, я бы рассказал и о ней, потому что его определенно стоит понять для отладки и обслуживания существующего кода, даже если вы не используете его для разработок. Вы можете все узнать о ней на сайте https://angular.io (и это знание тоже будет отлично смотреться в вашем резюме).

\
## Получение доступа к файлам React
---

Так же как jQuery и Angular, React имеет открытый исходный код и полностью бесплатна для использования. Как и в случае с другими средами, в интернете существует множество сервисов, которые бесплатно предоставят вам последнюю (или любую) версию, поэтому использовать React может быть так же просто, как разместить пару дополнительных строк кода на вашей веб-странице.

Прежде чем изучать, что можно сделать с React и как ее использовать, приведем пример того, как включить его в веб-страницу, извлекая файлы с unpkg.com:

```html
<script
src="https://unpkg.com/react@17/umd/react.development.js">
</script>
<script src="https://unpkg.com/react-dom@17/umd/react-                dom.development.js">
</script>
```

Для удобства доступа и чтобы сделать код как можно более кратким, я загрузил последнюю версию (на момент написания этих строк 17-ю) несжатых файлов разработки в архив примеров для этой книги (https://github.com/RobinNixon/lpmj6), так что все примеры будут загружаться локально и выглядеть следующим образом:

```html
<script src="react.development.js"></script>
<script src="react-dom.development.js"></script>
```

Что делать после того, как React стала доступна для вашего кода? Хотя в этом нет необходимости, далее мы подключаем расширение Babel JSX, которое позволяет включать XML-текст непосредственно в JavaScript, что значительно облегчит вашу жизнь.


### Включение babel.js
---

Расширение Babel JSX добавляет возможность использовать XML (очень похожий на HTML) непосредственно в JavaScript, избавляя вас от необходимости каждый раз вызывать функцию. Кроме того, в браузерах с версиями ECMAScript ранее 6-й (официальный стандарт JavaScript) Babel обновляет их для обработки синтаксиса ES6, обеспечивая таким образом два больших преимущества за один раз.

И снова вы можете извлечь нужный файл с сервера unpkg.com, например, так:

```html
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
```

Вам потребуется только одна свернутая версия кода Babel на сервере разработки или на рабочем сервере. Для удобства я также загрузил последнюю версию в сопутствующий архив файлов примеров, поэтому примеры из этой книги загружаются локально и выглядят следующим образом:

```html
<script src="babel.min.js"></script>
```

Теперь, когда мы смогли получить доступ к файлам React, продолжим работать с ними.

>[!info]
>Цель этой главы — научить вас основам использования React, обеспечить четкое понимание того, как и почему он работает, и предоставить вам хороший старт для дальнейшего развития в React. На самом деле некоторые примеры, приводимые в этой главе, основаны на примерах (или похожи на них), которые вы найдете в официальной документации на сайте http://reactjs.org/. Так что если захотите изучить React более подробно, можете посетить сайт и приступить к работе.


## Наш первый проект в React
---

Вместо того чтобы полностью обучить вас React и JSX, прежде чем приступить к кодированию, мы подойдем с другой стороны и покажем, насколько все просто. Для этого сразу перейдем к нашему первому проекту в React, как показано в **примере 24.1**, результатом которого является отображение в браузере текста «Клянусь Дживсом, это работает!».

>**Пример 24.1.** Наш первый проект в React
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Using a class</title>

    <script src='react.development.js'    ></script>
    <script src='react-dom.development.js'></script>
    <script src="babel.min.js">            </script>

    <script type="text/babel">
      class One extends React.Component
      {
        render()
        {
          return <p>By Jeeves, it works!</p>
        }
      }
      
      ReactDOM.render(<One />, document.getElementById('div1'))
    </script>
  </head>
  <body>
    <div id="div1" style='font-family:monospace'></div>
  </body>
</html>
```

Это стандартный документ HTML5, который загружается в два сценария React и сценарий Babel перед открытием встроенного сценария. Вот на что нам в первую очередь нужно обратить внимание, потому что вместо того, чтобы не указывать тип тега **`script`** или использовать **`type=application/javascript`**, тегу присваивается **`type=text/babel`**. Это позволяет браузеру разрешить выполнять сценарий препроцессору Babel, при необходимости добавить в него функциональность ES6, заменить любой встреченный XML на вызовы функций JavaScript и только после этого запускать содержимое сценария в качестве JavaScript.

Наконец, внутри сценария вызывается функция **`render`** класса **`One`**, ей передается идентификатор единственного элемента **`<div>`** в теле документа, которому был присвоен идентификатор **`div1`**. Результатом является визуализация XML в **`div`**, что заставляет браузер автоматически обновлять и отображать содержимое, которое выглядит следующим образом:

```html
By Jeeves, it works!
```

Вы сразу же увидите, что включение XML в JavaScript значительно упрощает и ускоряет написание кода, а также делает его более понятным. Без расширения JSX вам пришлось бы делать все это с помощью последовательности вызовов функций JavaScript.

>[!info]
>React обрабатывает компоненты, начинающиеся со строчных букв, к примеру теги DOM. Поэтому, например, элемент **`<div />`** представляет тег HTML **`<div>`**, но **`< One />`** представляет собой компонент и требует присутствия `One` в области применения — в предыдущем примере нельзя использовать оne (со строчной буквы «о») и ожидать, что код заработает, так как компонент и любое обращение к нему должны начинаться с прописной буквы.


### Использование функции вместо класса
---

Если хотите, можете использовать функцию для своего кода вместо того, чтобы помещать его в класс с функцией визуализации (и это встречается все чаще), как показано в **примере 24.2.** Основные причины, по которым вы можете предпочесть этот вариант, — простота, удобство использования и более быстрая разработка.

>**Пример 24.2.** Использование функции вместо класса
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Using a function</title>

    <script src='react.development.js'    ></script>
    <script src='react-dom.development.js'></script>
    <script src="babel.min.js">            </script>

    <script type="text/babel">
      function Two()
      {
        return <p>And this, by Jove!</p>
      }

      ReactDOM.render(<Two />, document.getElementById('div2'))
    </script>
  </head>
  <body>
    <div id="div2" style='font-family:monospace'></div>
  </body>
</html>
```

Результат будет отображаться в браузере следующим образом:

```html
И это работает!
```

>[!info]
>Начиная с этого момента, для краткости и простоты я буду показывать в примерах только содержимое сценария Babel и тело документа, как если бы они оба находились в теле (это работает точно так же), но примеры в сопутствующем архиве будут полными. Поэтому в дальнейшем они будут выглядеть следующим образом:
>```html
`<script` type="text/babel">
function Two()
{
  return `<p>`И это работает!`</p>`
}
ReactDOM.render(<Two />, document.getElementById('div2'))
`</script>`
`<div` id="div2">`</div>`




### Чистый и нечистый код: золотое правило
---

Когда вы пишете обычную функцию JavaScript, можно написать то, что React называет чистым или нечистым кодом. Чистый код функции не изменяет свои входные данные, что возвращает значение, вычисленное из его аргументов, как показано в примере далее:

```js
function mult(m1, m2)
{
  return m1 * m2
}
```

А следующая функция считается нечистой, поскольку она изменяет аргумент и абсолютно недопустима при использовании React:

```js
function assign(obj, val)
{
  obj.value = val
}
```

Если выразить это в виде золотого правила, то следует помнить, что все компоненты React должны действовать как чистые функции по отношению к своим свойствам, как объясняется в разделе «[[#Свойства и компоненты|Свойства и компоненты]]» далее в этой главе.


#### Совместное использование класса и функции
---

Конечно, вы можете применять функции и классы практически взаимозаменяемо (хотя между ними есть различия, которые я объясню в разделе [[#Различия между использованием класса и функции|«Различия между использованием класса и функции»]] далее в этой главе), как в примере 24.3.

>**Пример 24.3.** Совместное использование функции и класса
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Using a class and a function</title>

    <script src='react.development.js'    ></script>
    <script src='react-dom.development.js'></script>
    <script src="babel.min.js">            </script>

    <script type="text/babel">
      class One extends React.Component
      {
        render()
        {
          return <p>By Jeeves, it works!</p>
        }
      }
      
      function Two()
      {
        return <p>And this, by Jove!</p>
      }

      doRender(<One />, 'div1')
      doRender(<Two />, 'div2')

      function doRender(elem, dest)
      {
        ReactDOM.render(elem, document.getElementById(dest))
      }
    </script>
  </head>
  <body>
    <div id="div1" style='font-family:monospace'></div>
    <div id="div2" style='font-family:monospace'></div>
  </body>
</html>
```

Здесь есть класс с названием **`One`** и функция **`Two`**, и они точно такие же, как и в предыдущих двух примерах. Однако есть и дополнительное отличие — создание новой функции под названием **`doRender`**, которая значительно сокращает синтаксис вызова, необходимого для визуализации блока XML. Результат выполнения этой функции отображается в браузере следующим образом:

```html
Клянусь Дживсом, это работает!
И это работает!
```

>[!info]
>В дополнение к отсутствию окружающего HTML-кода в следующих примерах я опущу код функции **`doRender`**, чтобы избежать ненужного многократного повторения. Поэтому когда в этих примерах вы увидите вызов функции **`doRender`**, помните, что это не встроенная функция React, а функция, включенная в полные примеры в сопутствующем архиве.


#### Свойства и компоненты
---

Отличным способом познакомить вас с тем, что React называет *свойствами* и *компонентами*, будет создать простую страницу приветствия, в которой имя передается сценарию, а затем отображается. Один из способов сделать это показан в **примере 24.4.** Компоненты позволяют разделить пользовательский интерфейс на отдельные повторно используемые части и работать с каждой из них изолированно. Они похожи на функции JavaScript и принимают произвольные входные данные, которые называются *свойствами*, возвращая элементы React, которые описывают, как элементы должны отображаться в браузере.

>**Пример 24.4.** Передача свойств в функцию
```html
...
```

В этом примере функция **`Welcome`** получает аргумент **`props`**, который обозначает свойства, и в ее операторе возврата JSX есть раздел внутри фигурных скобок, который извлекает свойство **`name`** из объекта **`props`**:

```js
return <h1>Привет, {props.name}</h1>
```

Здесь **`props`** — это объект в React, и далее вы увидите один из способов заполнить его свойством.

Наконец, функции **`doRender`**, которая, как вы помните, является сокращенным вызовом, ведущим к функции **`ReactDOM.render`**, передается имя функции Welcome, после чего ее свойству name присваивается строковое значение 'Робин':

>[!info]
>Использование фигурных скобок — это способ встраивания выражений в JSX. Вы можете поместить практически любое выражение JavaScript внутрь этих фигурных скобок, и оно будет оценено (за исключением операторов for и if, которые не могут быть оценены).
>
>Соответственно, вместо props.name в этом примере можно было бы указать **`76 /13`** или **`«decode».substr(-4)`**, которое будет расценено как строка «code». Однако в данном случае имя свойства извлекается из объекта **`props`** и возвращается.

Затем React вызывает функцию **`Welcome`** (ее также называют компонентом), передавая ей **`{name:'Робин'}`** в свойствах. **`Welcome`** оценивает и возвращает результат **`<h1>Привет, Робин</h1>`**, который затем отображается в **`div`** под названием **`hello`** и отображается в браузере следующим образом:

```html
Привет, Робин
```

Чтобы сделать свой код более аккуратным, при желании вы можете сначала создать элемент, содержащий XML для передачи в **`doRender`**, например, так:

```js
const elem = <Welcome name='Робин' />
doRender(elem, 'hello')
```


#### Различия между использованием класса и функции
---
