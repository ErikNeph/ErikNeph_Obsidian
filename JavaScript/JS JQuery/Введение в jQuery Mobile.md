---
date of creation: 2024-07-13T02:38:00
tags:
  - JavaScript
  - IT/JavaScript
  - JQuery
  - JS/JQuery
  - Developing/JS
  - jQueryMobile
  - Framework/JS
  - Framework
read status: false
aliases:
  - Краткое знакомство с jQuery Mobile
---
---
# Введение в jQuery Mobile



После изучения [[Введение в JQuery]] и осознания того, что использование jQuery существенно экономит время и повышает эффективность разработки программ, вам, видимо, будет приятно узнать о дальнейшем расширении возможностей за счет применения библиотеки jQuery Mobile.

Созданная в качестве дополнения к jQuery, библиотека jQuery Mobile требует включения в веб-страницу обеих этих библиотек (а также использования файла CSS и дополнительных изображений). Это позволяет при просмотре страницы на смартфонах и других мобильных устройствах воспользоваться полностью интерактивным интерфейсом.

Библиотека jQuery Mobile позволяет переделывать обычные веб-страницы, превращая их в страницы для мобильных устройств с помощью технологии под названием *[[Постепенное улучшение|постепенное улучшение]]* (при использовании которой сначала для получения наилучшего отображения применяются основные функции браузера, а затем происходит добавление функциональной насыщенности по мере раскрытия возможностей имеющегося на устройстве браузера). В библиотеке применяются также функции так называемого *[[Адаптивный веб-дизайн|адаптивного веб-дизайна]]* (благодаря чему достигается весьма качественное отображение веб-страниц на широком диапазоне устройств при различных размерах окон и экранов).

Основная цель данной главы не заключается в том, чтобы научить вас абсолютно всему, что нужно знать о jQuery Mobile, для чего может понадобиться целая книга! Мне хочется снабдить вас информацией, достаточной для преобразования любого не слишком большого объема веб-страниц в выстраиваемое в логическую последовательность быстрое и красивое веб-приложение со всеми слайд-показами страниц и другими переходами, ожидаемыми от современного сенсорного устройства, а также с более крупными и удобными в использовании значками, полями ввода и другими усовершенствованиями ввода и навигации.

С этой целью будет рассмотрен лишь небольшой объем основных функций jQuery Mobile, позволяющий приступить к разработке вполне понятных и работающих решений, способных запускаться как на настольных компьютерах, так и на мобильных платформах. Наряду с этим будут рассмотрены сложности, с которыми можно столкнуться на пути предлагаемой адаптации веб-страниц под мобильные устройства, и способы их преодоления. После освоения работы с библиотекой jQuery Mobile станет проще ориентироваться в онлайн-документации при поиске функциональных свойств, необходимых при разработке ваших собственных проектов.

>[!info]
>Кроме постепенного улучшения способа отображения вашего кода HTML в зависимости от возможностей браузера, на котором он обнаружит себя запущенным, библиотека jQuery Mobile также постепенно улучшает обычную HTML-разметку на основе используемых тегов и набора пользовательских атрибутов данных. Некоторые элементы подвергаются автоматическому улучшению, не нуждаясь при этом в каких-либо атрибутах данных (например, элементы выбора проходят автоматическое преобразование в меню), а некоторые требуют для усовершенствования наличия атрибутов данных. Полный перечень подмдерживаеых атрибутов данных можно найти в документации по API: http://api.jquerymobile.com/data-attribute.


### Включение **`jQuery Mobile`**
---

Включить jQuery Mobile в ваши веб-страницы можно двумя способами. Можно перейти на страницу загрузки http://jquerymobile.com/download/, выбрать нужную версию, загрузить файлы на ваш веб-сервер (включая таблицы стилей и сопутствующие изображения, поставляемые вместе с библиотекой) и пользоваться всем этим отсюда.

Например, если в корневой каталог документов вашего сервера загружена библиотека jQuery Mobile 1.4.5 (это последняя версия на момент написания книги) и ее CSS-файл, можно включать в веб-страницу их и сопутствующую им JavaScript-библиотеку jQuery, у которой, применительно ко времени написания книги, должна быть версия 2.2.4. Следует отметить, что прошло немало времени с момента обновления jQuery Mobile, и мне интересно, могут ли из-за этого другие технологии в ближайшем будущем превзойти эту библиотеку:

```html
<link href="http://myserver.com/jquery.mobile-1.4.5.min.css" rel="stylesheet">

<script src='http://myserver.com/jquery-2.2.4.min.js'></script>
<script src='http://myserver.com/jquery.mobile-1.4.5.min.js'></script>
```

Или же, как и в случае применения jQuery, можно воспользоваться предлагаемой в свободном доступе сетью доставки контента — content delivery network (CDN) и просто сослаться на требуемую вам версию (или версии). Свой выбор можно остановить на одной из трех основных CDN-сетей (Max CDN, Google CDN и Microsoft CDN), нужные файлы из которых извлекаются следующими способами:

```html
<!-- Retrieving jQuery & Mobile via Max CDN -->
<link rel="stylesheet"
href="http://code.jquery.com/mobile/1.4.5/jquery.mobile 1.4.5.min.css">
<script src="http://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"> </script>

<!-- Retrieving jQuery & Mobile via Google CDN -->
<link rel="stylesheet" href=
"http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css">
<script src=
"http://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src=
"http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js">
</script>

<!-- Retrieving jQuery & Mobile via Microsoft CDN -->
<link rel="stylesheet" href=
"http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.4.5/jquery.mobile-1.4.5.min.css">
<script src=
"http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.2.4.min.js">
</script>
<script src=
"http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.4.5/jquery.mobile-1.4.5.min.js">
</script>
```

Вероятно, один из наборов этих инструкций вам захочется разместить в **`<head>`** разделе страницы.


## Начало работы
---

Давайте сразу углубимся в тему, наблюдая за общим внешним видом веб-страницы jQuery Mobile, воспользовавшись кодом, показанным в **примере 23.1**. По сути, ничего сложно в этом не будет, и данное беглое ознакомление поможет быстро разложить по своим местам весь остальной материал данной главы.

>**Пример 23.1.** Одностраничный шаблон jQuery Mobile
```html
<!DOCTYPE html>
<html lang="ru"> 

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Single page template</title>
  <link rel="stylesheet" href="jquery.mobile-1.4.5.min.css">
  <script src="jquery-2.2.4.min.js"></script>
  <script src="jquery.mobile-1.4.5.min.js"></script>
</head>

<body>
  <div data-role="page">
    <div data-role="header">
      <h1>Single page</h1>
    </div>
    <div data-role="content">
      <p>Это однострочный шаблон страницы</p>
    </div>
    <div data-role="footer">
      <h4>Footer content</h4>
    </div>
  </div>
</body>  

</html>
```

При изучении предыдущего примера видно, что он начинается со стандартных и вполне ожидаемых элементов HTML5. Первым необычным элементом, который может броситься в глаза в разделе **`<head>`**, станет настройка окна просмотра **`viewport`**, осуществляемая внутри тега **`<meta>`**. Этот тег должен присутствовать на всех ваших веб-страницах, поскольку большинство пользователей в настоящее время просматривают веб-страницы с мобильных устройств.

Эта строка кода указывает мобильным браузерам на необходимость установки ширины показываемого документа на ширину окна браузера и на начало работы с документом без увеличения или уменьшения его изображения.

При отображении в браузере, где высота больше ширины, страница выглядит как на **рис. 23.1.**

>![[Рис. 23.1. Отображение одностраничного шаблона jQuery Mobile в окне браузера.jpg]]
>**Рис. 23.1.** Отображение одностраничного шаблона jQuery Mobile в окне браузера

После обозначения заголовка страницы загружается CSS для jQuery Mobile, затем загружается библиотека jQuery 2.2.4 и библиотека jQuery Mobile 1.4.5. Если хотите, можете загрузить их из сети CDN, о чем уже говорилось в разделе «Включение jQuery Mobile» ранее в этой главе.

>[!info]
>В примерах, сопровождающих эту главу, есть папка с именем images, содержащая значки и другие изображения, востребованные таблицами CSS. Если для загрузки CSS и файлов библиотек JavaScript используется сеть CDN, необходимость включения этой папки в ваш собственный проект может отпасть, поскольку вместо нее нужно будет воспользоваться папкой изображений, принадлежащей сети CDN.

Переместившись к разделу **`<body>`**, следует заметить, что главная веб-страница помещена в **`<div>`**-элемент, содержащий еще три **`<div>`**-элемента для заголовка, контента и нижнего колонтитула страницы, у каждого из которых имеется соответствующее свойство **`data-role`**.

Из этого складывается основная структура веб-страницы jQuery Mobile. Связывание страниц предполагает загрузку новых страниц и добавление их в DOM-модель с использованием асинхронного режима обмена данными. После загрузки страница может выводиться на экран множеством способов, включая мгновенную замену прежней страницы, плавное выведение новой страницы, постепенное превращение старой страницы в новую, наплыв новой страницы на старую и т. д.

>[!info]
>Из-за асинхронной загрузки веб-страниц тестирование вашего кода jQuery Mobile всегда нужно проводить на веб-сервере, а не в локальной файловой системе. Это связано с тем, что именно веб-сервер обеспечивает асинхронную загрузку веб-страниц, необходимую для правильного обмена данными. Для этого достаточно системы AMPPS, при условии, что вы получаете доступ к файлам, используя localhost:// или http://127.0.0.1/.


## Связывание страниц
---

Библиотека jQuery Mobile позволяет связывать страницы обычным способом и выполнять (по возможности) асинхронною обработку страничных запросов, чтобы обеспечить применение любых выбранных вами переходов.

Это позволяет сосредоточиться просто на создании веб-страниц, возложив на средства библиотеки jQuery Mobile обязанности по формированию их удобного внешнего вида и быстрому их выводу на экран в профессиональном качестве.

Чтобы включить анимированные переходы от страницы к странице, все ссылки, указывающие на внешние страницы, приведут к загрузке страниц в асинхронном режиме. В jQuery Mobile это достигается за счет превращения всех ссылок вида **`<a href...>`** в асинхронные запросы на обмен данными (также известные как Ajax), с последующим выводом на экран кругового индикатора загрузки на время выполнения запроса. Очевидно, что это относится только к ссылкам на внутренние страницы.

>[!info]
>Смена страниц после щелчка на ссылке выполняется в библиотеке jQuery Mobile за счет «перехвата» щелчков при доступе к событию event. preventDefault и последующего предоставления собственного особого кода jQuery Mobile.

Если запрос завершен успешно, к DOM-модели добавляется содержимое новой страницы, а затем происходит визуализация выбранной новой страницы с использованием перехода либо по умолчанию, либо по вашему выбору.

При неудачном завершении запроса ненадолго будет выведено небольшое и ненавязчивое уведомительное сообщение об ошибке, которое не помешает навигации по страницам.


### Синхронная связанность
---

Данные по ссылкам, указывающим на другие домены или имеющим атрибуты **`rel="external", data-ajax="false"`** или **`target`**, будут загружаться в синхронном режиме, что приведет к полному обновлению страницы без анимированных переходов.

Атрибуты **`rel="external"`** и **`data-ajax="false"`** приводят к одинаковому эффекту, но первый из них предназначен для ссылок на другой сайт или домен, а второй пригодится для предотвращений асинхронного режима загрузки любой страницы.

Из-за ограничений, накладываемых мерами безопасности, jQuery Mobile загружает страницы со всех внешних доменов в синхронном режиме.

>[!tip]
>При использовании выгрузки HTML-файла асинхронную загрузку страниц придется отключить, поскольку этот способ извлечения веб-страницы конфликтует с заложенной в jQuery Mobile возможностью получения выгружаемого файла. Для данного конкретного случая наилучшим вариантом, наверное, станет помещение атрибута **`data-ajax="false"`** в элемент **`<form>`**:
```html
<form data-ajax='false' method='post'
  action='dest_file' enctype='multipart/form-data'>
```


### Связанность внутри многостраничного документа
---

В одном HTML-документе может содержаться одна или несколько страниц. Последний вариант предполагает формирование структуры из **`<div>`**-элементов с указанием характера имеющихся на странице данных — **`data-role`**. Это позволяет создать в рамках *одного* HTML-документа небольшой сайт или приложение; библиотека jQuery Mobile просто отобразит на экране первую страницу, которая будет найдена в исходном порядке загрузки страниц.

Если ссылка в многостраничном документе указывает на гипертекстовый элемент (например, **`#page2`**), среда станет искать охватывающий страницу **`<div>`**-элемент с атрибутом **`data-role`**, имеющим значение **`page`** и с заданными идентификатором ID (**`id="page2"`**). Если такая страница будет найдена, произойдет ее вывод на экран.

Библиотека jQuery Mobile позволяет пользователям беспрепятственно перемещаться между всеми типами веб-страниц (внутренними, локальными или внешними). Для конечного пользователя все страницы будут выглядеть одинаково, за исключением внешних страниц, при вызове которых будет выводиться круговой индикатор загрузки Ajax, но внешние загруженные страницы будут заменять текущую страницу, в отличие от внутренних, которые вставляются в DOM, чтобы сохранить весь функционал jQuery Mobile. Во всех ситуациях jQuery Mobile обновляет страничный URL-хеш с целью поддержки функционирования кнопки возврата на предыдущую страницу. Этот также означает, что страницы jQuery Mobile могут индексироваться поисковыми механизмами и не имеют никаких барьеров где-нибудь в своем родном приложении.

>[!danger]
>При связывании из страницы, отображенной в формате для мобильных устройств и загруженной в асинхронном режиме в документ, в котором содержатся несколько внутренних страниц, к ссылке нужно добавить либо `rel="external"`, либо `data-ajax="false"`, чтобы принудительно вызвать полную перезагрузку страницы, вычищая асинхронный хеш из URL. В страницах, загруженных в асинхронном режиме, знак решетки (`#`) используется для отслеживания их истории, в то время как во множестве внутренних страниц этот знак используется в качестве признака внутренних страниц.


### Смена страниц
---

Путем использования CSS-переходов jQuery Mobile может, при условии использования асинхронной навигации (включаемой по умолчанию), применять эффекты к любой ссылке на страницу или к отправке формы.

Чтобы воспользоваться переходом, внутри тега **`<a>`** или **`<form>`** применяется атрибут **`data-transition`**:

```html
<a data-transition="slide" href="destination.html">Click me</a>
```

Этот атрибут поддерживает значения **`fade`** (начиная с версии 1.1 используется по умолчанию), **`pop`**, **`flip`**, **`turn`**, **`flow`**, **`slidefade`**, **`slide`** (использовалось по умолчанию до версии 1.1), **`slideup`**, **`slidedown`** и **`none`**.

Например, значение **`slide`** вызывает наплыв новой страницы справа, при одновременном сдвиге текущей страницы влево. Эффект, вызываемый другими значениями, обусловливается их названиями.


### Загрузка страницы, используемой в качестве диалогового окна
---

Новую страницу можно отобразить на экране в качестве диалогового окна, воспользовавшись атрибутом **`data-rel`** со значением **`dialog`**:

```html
<a data-rel="dialog" href="dialog.html">Open dialog</a>
```

Применение различных страничных переходов как к загрузке страниц, так и к диалогам при локальной (не по сети CDN) загрузке библиотек jQuery показано в **примере 23.2**. Он состоит из простой таблицы в два столбца, первый из которых предназначен для загрузки диалога, а второй — для загрузки новой страницы. Перечислен каждый из доступных типов переходов. Чтобы ссылки выглядели как кнопки, каждая из них снабжена атрибутом **`data-role`** со значением **`button`** (кнопки рассматриваются в разделе «Стильные кнопки» далее в этой главе).

>**Пример 23.2.** Страничные переходы в jQuery Mobile
```html
<!DOCTYPE html> 
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>Page Transitions</title> 
    <link rel="stylesheet" href="jquery.mobile-1.4.5.min.css">
    <script src="jquery-2.2.4.min.js"></script>
    <script src="jquery.mobile-1.4.5.min.js"></script>
  </head> 
  <body> 
    <div data-role="page">
      <div data-role="header">
        <h1>jQuery Mobile Page Transitions</h1>
      </div>
      <div data-role="content"><table>
        <tr><th><h3>fade</h3></th>
          <td><a href="page-template.html" data-rel="dialog"
           data-transition="fade" data-role='button'>dialog</a>              </td>
          <td><a href="page-template.html" data-transition="fade"
           data-role='button'>page</a></td>
        </tr><tr><th><h3>pop</h3></th>
          <td><a href="page-template.html" data-rel="dialog"
           data-transition="pop" data-role='button'>dialog</a></td>
          <td><a href="page-template.html" data-transition="pop"
           data-role='button'>page</a></td>
        </tr><tr><th><h3>flip</h3></th>
          <td><a href="page-template.html" data-rel="dialog"
           data-transition="flip" data-role='button'>dialog</a>              </td>
          <td><a href="page-template.html" data-transition="flip"
           data-role='button'>page</a></td>
        </tr><tr><th><h3>turn</h3></th>
          <td><a href="page-template.html" data-rel="dialog"
           data-transition="turn" data-role='button'>dialog</a>              </td>
          <td><a href="page-template.html" data-transition="turn"
           data-role='button'>page</a></td>
        </tr><tr><th><h3>flow</h3></th>
          <td><a href="page-template.html" data-rel="dialog"
           data-transition="flow" data-role='button'>dialog</a>               </td>
          <td><a href="page-template.html" data-transition="flow"
           data-role='button'>page</a></td>
        </tr><tr><th><h3>slidefade</h3></th>
          <td><a href="page-template.html" data-rel="dialog"
           data-transition="slidefade" data-                                       role='button'>dialog</a></td>
          <td><a href="page-template.html" data-                                    transition="slidefade"
           data-role='button'>page</a></td>
        </tr><tr><th><h3>slide</h3></th>
          <td><a href="page-template.html" data-rel="dialog"
           data-transition="slide" data-role='button'>dialog</a>               </td>
          <td><a href="page-template.html" data-transition="slide"
           data-role='button'>page</a></td>
        </tr><tr><th><h3>slideup</h3></th>
          <td><a href="page-template.html" data-rel="dialog"
           data-transition="slideup" data-role='button'>dialog</a>          </td>
          <td><a href="page-template.html" data-                              transition="slideup"
           data-role='button'>page</a></td>
        </tr><tr><th><h3>slidedown</h3></th>
          <td><a href="page-template.html" data-rel="dialog"
           data-transition="slidedown" data-                                  role='button'>dialog</a></td>
          <td><a href="page-template.html" data-                              transition="slidedown"
           data-role='button'>page</a></td>
        </tr><tr><th><h3>none</h3></th>
          <td><a href="page-template.html" data-rel="dialog"
           data-transition="none" data-role='button'>dialog</a>             </td>
          <td><a href="page-template.html" data-transition="none"
           data-role='button'>page</a></td></tr></table>
      </div>
      <div data-role="footer">
        <h4><a href="http://tinyurl.com/jqm-trans">Official                    Demo</a></h4>
      </div>
    </div>
  </body>
</html>
```

Файл page-template.html:
```html
<!DOCTYPE html> 
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>Single page template</title> 
    <link rel="stylesheet" href="jquery.mobile-1.4.5.min.css">
    <script src="jquery-2.2.4.min.js"></script>
    <script src="jquery.mobile-1.4.5.min.js"></script>
  </head> 
  <body> 
    <div data-role="page">
      <div data-role="header">
        <h1>Single page</h1>
      </div>
      <div data-role="content">	
        <p>This is a single page boilerplate template</p>
      </div>
      <div data-role="footer">
        <h4>Footer content</h4>
      </div>
    </div>
  </body>
</html>
```

На **рис. 23.2** показаны результаты загрузки этого примера (сохраненного в файле transitions.html) в браузер, на **рис. 23.3** показывается в действии переход в виде переворота (flip). Кстати, переход по ссылке http://demos.jquerymobile.com/1.4.4/transitions/, приведенной в самом конце примера, приведет к сайту официальной демонстрации, где можно будет ознакомиться с этими эффектами более подробно.

>![[Рис. 23.2. Применение переходов к страницам и диалогам.jpg]]
>**Рис. 23.2.** Применение переходов к страницам и диалогам
>![[Рис. 23.3. Flip-переход в действии.jpg]]
>**Рис. 23.3.** Flip-переход в действии


### Стильные кнопки
---

Простую ссылку совсем нетрудно показать в виде кнопки, не добавляя для этого свой собственный код CSS. Нужно лишь предоставить значение **`button`** используемому в элементе атрибуту **`data-role`**:

```html
<a data-role="button" href="news.html">Latest news</a>
```

Можно решать, будет ли эта кнопка шириной во все окно (по умолчанию), подобно **`<div>`**-элементу, или же показана как составляющая линейной структуры, подобно **`<span>`**-элементу. Для второго варианта атрибуту **`data-inline`** нужно присвоить значение **`true`**:

```html
<a data-role="button" data-inline="true" href="news.html">Latest      news</a>
```

Изменить способ отображения можно для любой кнопки, как созданной из ссылки, так и использованной из формы, для чего нужно сделать выбор между скругленными углами (по умолчанию) или прямыми углами и придать кнопке тень (по умолчанию) или показать ее без тени. Функции, используемые по умолчанию, можно выключить, присвоив соответствующим атрибутам **`datacorners`** и **`data-shadow`** значение **`false`**:

```html
<a data-role="button" data-inline="true" data-corners="false"
  data-shadow="false" href="news.html">Latest news</a>
```

Более того, воспользовавшись атрибутом **`data-icon`**, можно даже добавить к копкам значки:

```html
<a data-role="button" data-inline="true" data-icon="home"
  href="home.html">Home page</a>
```
